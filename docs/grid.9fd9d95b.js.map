{"version":3,"sources":["grid.js"],"names":["GridGame","initialize","container","size","width","height","serializedHistory","currentPlayer","points","connectedPoints","completedBlocks","currentPlayerElement","otherPlayerElement","createDom","pushToHistory","checkEnd","window","alert","isSquareComplete","x","y","tl","tr","bl","br","checkAndMark","markedBlock","markBlockAsActive","connectPoints","x0","y0","x1","y1","origin","destination","markLineAsActive","marked","updateCurrentPlayer","switchCurrentPlayer","push","JSON","stringify","serialize","popFromHistory","history","pop","undefined","unserialize","parse","onClickLine","markBlockAs","isActive","element","document","getElementById","classList","remove","add","markLineAs","createDotElement","parent","createElement","className","appendChild","createLineElement","isVertical","id","addEventListener","e","createHorizontalLineElement","createVerticalLineElement","createBlockElement","createRowElement","createRowDotLine","row","createLineBlockRow","createCurrentPlayerLabel","innerText","data","line","save","localStorage","setItem","load","getItem","game","which","console","log"],"mappings":"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","file":"grid.9fd9d95b.js","sourceRoot":"..","sourcesContent":["import './grid.css'\n\nfunction GridGame () {\n  this.initialize = function (container) {\n    this.container = container\n    this.size = {\n      width: 6,\n      height: 6\n    }\n\n    this.serializedHistory = []\n    // could be either blue or red\n    this.currentPlayer = 'blue'\n    this.points = {\n      'blue': 0,\n      'red': 0\n    }\n    // every time a line is made we store a true value here\n    // line information will be a double point key\n    // x0-y0-x1-y1 where 0 is the top left point and 1 is the bottom right\n    // and example could be\n    // '0-0-0-1': false\n    // '0-0-0-1': 'blue'\n    // '0-0-0-1': 'red'\n    // '0-0-1-1' not valid it is a diagonal\n    // '0-0-1-0: valid\n    this.connectedPoints = {}\n    // data will be like { 'x-y': 'blue', 'x-y': 'red', 'x-y': false }\n    this.completedBlocks = {}\n    this.currentPlayerElement = null\n    this.otherPlayerElement = null\n    this.createDom()\n    this.pushToHistory()\n  }\n\n  this.checkEnd = function () {\n    let current = this.points['red'] + this.points['blue']\n    let total = this.size.width * this.size.height\n    if (current === total) {\n      if (this.points['red'] > this.points['blue']) {\n        window.alert('Red Player Won')\n      } else if (this.points['red'] < this.points['blue']) {\n        window.alert('Blue Player Won')\n      } else {\n        window.alert('No winners')\n      }\n    }\n  }\n\n  this.isSquareComplete = function (x, y) {\n    // if all the lines of the current block are marked then is complete\n    let tl = `${x}-${y}`\n    let tr = `${x + 1}-${y}`\n    let bl = `${x}-${y + 1}`\n    let br = `${x + 1}-${y + 1}`\n    return this.connectedPoints[`${tl}-${tr}`] && this.connectedPoints[`${tl}-${bl}`] && this.connectedPoints[`${bl}-${br}`] && this.connectedPoints[`${tr}-${br}`]\n  }\n\n  this.checkAndMark = function (x, y, currentPlayer) {\n    // return true if the block is now complete and marked by the current player\n    let markedBlock = false\n    if (!this.completedBlocks[`${x}-${y}`] && this.isSquareComplete(x, y)) {\n      markedBlock = true\n      this.completedBlocks[`${x}-${y}`] = currentPlayer\n      this.markBlockAsActive(x, y, currentPlayer)\n    }\n    return markedBlock\n  }\n\n  this.connectPoints = function (x0, y0, x1, y1, currentPlayer) {\n    let origin = `${x0}-${y0}`\n    let destination = `${x1}-${y1}`\n    if (this.connectedPoints[`${origin}-${destination}`]) {\n      // already taken\n      return false\n    }\n    this.markLineAsActive(x0, y0, x1, y1, currentPlayer)\n    this.connectedPoints[`${origin}-${destination}`] = currentPlayer\n    let marked = 0\n    marked += this.checkAndMark(x0, y0, currentPlayer) ? 1 : 0\n    marked += this.checkAndMark(x0 - 1, y0, currentPlayer) ? 1 : 0\n    marked += this.checkAndMark(x0, y0 - 1, currentPlayer) ? 1 : 0\n    if (marked > 0) {\n      this.points[this.currentPlayer] += marked\n      this.updateCurrentPlayer(this.currentPlayer)\n      this.checkEnd()\n    } else {\n      this.switchCurrentPlayer(this.currentPlayer)\n    }\n    return true\n  }\n\n  this.pushToHistory = function () {\n    this.serializedHistory.push(JSON.stringify(this.serialize()))\n  }\n\n  this.popFromHistory = function () {\n    var history = this.serializedHistory.pop()\n    if (history === undefined) { return }\n    this.unserialize(JSON.parse(history))\n  }\n\n  this.onClickLine = function (x0, y0, x1, y1) {\n    this.pushToHistory()\n    if (!this.connectPoints(x0, y0, x1, y1, this.currentPlayer)) {\n      this.serializedHistory.pop()\n    }\n  }\n\n  this.switchCurrentPlayer = function (currentPlayer) {\n    this.currentPlayer = currentPlayer === 'blue' ? 'red' : 'blue'\n    this.updateCurrentPlayer(this.currentPlayer)\n  }\n\n  // DOM RELATED\n  this.markBlockAsActive = function (x, y, currentPlayer) {\n    this.markBlockAs(x, y, true, currentPlayer)\n  }\n\n  this.markBlockAs = function (x, y, isActive, currentPlayer) {\n    let element = document.getElementById(`block-${x}-${y}`)\n    if (!element) { return }\n    element.classList.remove('active')\n    element.classList.remove('blue')\n    element.classList.remove('red')\n    if (isActive) {\n      element.classList.add('active')\n    }\n    if (currentPlayer) {\n      element.classList.add(currentPlayer)\n    }\n  }\n\n  this.markLineAsActive = function (x0, y0, x1, y1, currentPlayer) {\n    this.markLineAs(x0, y0, x1, y1, true, currentPlayer)\n  }\n  this.markLineAs = function (x0, y0, x1, y1, isActive, currentPlayer) {\n    let element = document.getElementById(`line-${x0}-${y0}-${x1}-${y1}`)\n    if (!element) { return }\n    element.classList.remove('active')\n    element.classList.remove('blue')\n    element.classList.remove('red')\n    if (isActive) {\n      element.classList.add('active')\n    }\n    if (currentPlayer) {\n      element.classList.add(currentPlayer)\n    }\n  }\n\n  this.createDotElement = function (parent) {\n    let element = document.createElement('div')\n    element.className = 'dot'\n    parent.appendChild(element)\n    return element\n  }\n\n  this.createLineElement = function (parent, isVertical, x, y) {\n    let element = document.createElement('div')\n    element.className = isVertical ? 'v-line line' : 'h-line line'\n    var origin = [x, y]\n    var destination = isVertical ? [x, y + 1] : [x + 1, y]\n    element.id = `line-${origin[0]}-${origin[1]}-${destination[0]}-${destination[1]}`\n    element.addEventListener('click', (e) => {\n      this.onClickLine(origin[0], origin[1], destination[0], destination[1], this.currentPlayer)\n    })\n    parent.appendChild(element)\n    return element\n  }\n\n  this.createHorizontalLineElement = function (parent, x, y) {\n    return this.createLineElement(parent, false, x, y)\n  }\n\n  this.createVerticalLineElement = function (parent, x, y) {\n    return this.createLineElement(parent, true, x, y)\n  }\n\n  this.createBlockElement = function (parent, x, y) {\n    let element = document.createElement('div')\n    element.className = 'block'\n    element.id = `block-${x}-${y}`\n    parent.appendChild(element)\n    return element\n  }\n\n  this.createRowElement = function (parent) {\n    let element = document.createElement('div')\n    element.className = 'row'\n    parent.appendChild(element)\n    return element\n  }\n\n  this.createRowDotLine = function (container, y) {\n    var row = this.createRowElement(container)\n    for (let x = 0; x < this.size.width; x++) {\n      this.createDotElement(row, x, y)\n      this.createHorizontalLineElement(row, x, y)\n    }\n    this.createDotElement(row, this.size.width, y)\n  }\n\n  this.createLineBlockRow = function (container, y) {\n    var row = this.createRowElement(container)\n    for (let x = 0; x < this.size.width; x++) {\n      this.createVerticalLineElement(row, x, y)\n      this.createBlockElement(row, x, y)\n    }\n    this.createVerticalLineElement(row, this.size.width, y)\n  }\n\n  this.createCurrentPlayerLabel = function (container) {\n    let row = this.createRowElement(container)\n    let element = document.createElement('div')\n    element.className = 'current-player'\n    row.appendChild(element)\n    this.currentPlayerElement = element\n\n    row = this.createRowElement(container)\n    element = document.createElement('div')\n    element.className = 'other-player'\n    row.appendChild(element)\n    this.otherPlayerElement = element\n  }\n\n  this.updateCurrentPlayer = function (currentPlayer) {\n    this.container.classList.remove('red')\n    this.container.classList.remove('blue')\n    this.currentPlayerElement.classList.remove('red')\n    this.currentPlayerElement.classList.remove('blue')\n    this.otherPlayerElement.classList.remove('red')\n    this.otherPlayerElement.classList.remove('blue')\n\n    if (currentPlayer === 'blue') {\n      this.container.classList.add('blue')\n      this.currentPlayerElement.classList.add('blue')\n      this.currentPlayerElement.innerText = `Blue: ${this.points['blue']}`\n      this.otherPlayerElement.classList.add('red')\n      this.otherPlayerElement.innerText = `Red: ${this.points['red']}`\n    } else {\n      this.container.classList.add('red')\n      this.currentPlayerElement.classList.add('red')\n      this.currentPlayerElement.innerText = `Red: ${this.points['red']}`\n      this.otherPlayerElement.classList.add('blue')\n      this.otherPlayerElement.innerText = `Blue: ${this.points['blue']}`\n    }\n  }\n\n  this.createDom = function () {\n    for (let y = 0; y < this.size.height; y++) {\n      this.createRowDotLine(this.container, y)\n      this.createLineBlockRow(this.container, y)\n    }\n    this.createRowDotLine(this.container, this.size.height)\n    this.createCurrentPlayerLabel(this.container)\n    this.switchCurrentPlayer(this.currentPlayer)\n  }\n\n  this.serialize = function () {\n    return {\n      currentPlayer: this.currentPlayer,\n      connectedPoints: this.connectedPoints,\n      completedBlocks: this.completedBlocks,\n      points: this.points\n    }\n  }\n\n  this.unserialize = function (data) {\n    this.currentPlayer = data.currentPlayer\n    this.connectedPoints = data.connectedPoints\n    this.completedBlocks = data.completedBlocks\n    this.points = data.points\n    for (let y = 0; y <= this.size.height; y++) {\n      for (let x = 0; x <= this.size.width; x++) {\n        // blocks\n        if (this.completedBlocks[`${x}-${y}`]) {\n          this.markBlockAs(x, y, true, this.completedBlocks[`${x}-${y}`])\n        } else {\n          this.markBlockAs(x, y)\n        }\n        // lines left to right\n        let line = this.connectedPoints[`${x}-${y}-${x + 1}-${y}`]\n        if (line) {\n          this.markLineAsActive(x, y, x + 1, y, line)\n        } else {\n          this.markLineAs(x, y, x + 1, y)\n        }\n        // lines top to bottom\n        line = this.connectedPoints[`${x}-${y}-${x}-${y + 1}`]\n        if (line) {\n          this.markLineAsActive(x, y, x, y + 1, line)\n        } else {\n          this.markLineAs(x, y, x, y + 1)\n        }\n      }\n    }\n    this.updateCurrentPlayer(this.currentPlayer)\n  }\n\n  this.save = function () {\n    window.localStorage.setItem('data', JSON.stringify(this.serialize()))\n  }\n\n  this.load = function () {\n    this.unserialize(JSON.parse(window.localStorage.getItem('data')))\n  }\n}\n\nlet game = new GridGame()\n\nwindow.addEventListener('load', function () {\n  var container = document.getElementById('grid-game')\n  game.initialize(container)\n})\n\nwindow.addEventListener('keydown', (e) => {\n  switch (e.which) {\n    case 85:\n      // u UNDO\n      game.popFromHistory()\n      break\n    default:\n      console.log(e.which)\n  }\n})\n\nexport default () => {}\n"]}